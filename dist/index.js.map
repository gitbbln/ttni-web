{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"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","sourcesContent":["import type { TItems, TLevels, TColors, TLogs, TObj } from './ttni';\r\nexport class TTNI {\r\n  private colorWarning: TLevels = {\r\n    error: \"R Y\",\r\n    1: \"B Y\",\r\n    2: \"G R\",\r\n    watch: \"R G\",\r\n    4: \"M W\",\r\n    5: \"C Y\",\r\n    6: \"W R\",\r\n\r\n\r\n  }\r\n  private colorLevel: TLevels = {\r\n    1: \"B Y\",\r\n    //2:\"G R\",\r\n    2: this.colorWarning.watch,\r\n    3: this.colorWarning.error,\r\n    4: \"M W\",\r\n    5: \"C Y\",\r\n    6: \"W R\",\r\n    7: \"R G\",\r\n\r\n\r\n  }\r\n  alias: string;\r\n\r\n  bCaller: boolean = false;\r\n  bColorIgnore: boolean = false;\r\n  bLogsIgnore: boolean = true;\r\n  bShowTimer: boolean;\r\n  bShowError: boolean;\r\n  bTest: boolean = false;\r\n  bTrace: boolean;\r\n  bHtml: boolean = true;\r\n  bConsole: boolean = true;\r\n\r\n\r\n  colorPlugin: string = 'R Y'\r\n  colorReset: string = \"\";\r\n  colorError: string;\r\n  comma = \";\";\r\n  close: string;\r\n\r\n  dsp2: TObj = {};\r\n\r\n  fileName: string = '*FILENAME*';\r\n  fn: string;\r\n\r\n  getError: TItems;\r\n\r\n  logs: TLogs | undefined;\r\n\r\n  maxColorsLevel: number = 7;\r\n\r\n  nsp: number = 0;\r\n\r\n  plugin: object;\r\n  ps: string;\r\n\r\n  stack: string;\r\n  sError: string;\r\n  s: string = \"\";\r\n\r\n  private te: Date;\r\n  ts: Date;\r\n\r\n  fillColors(v: TColors) {\r\n    for (let key in v) {\r\n      let s = key[0].toUpperCase();\r\n      v[s] = v[key];\r\n      v[key.toUpperCase()] = v[key];\r\n    }\r\n    //console.log(v);\r\n\r\n  }\r\n  fillAttrs(v: TColors) {\r\n    for (let key in v) {\r\n      let s0 = key[0].toUpperCase();\r\n      let s1 = key[1].toUpperCase();\r\n      v[s0 + s1] = v[key];\r\n      v[key.toUpperCase()] = v[key];\r\n    }\r\n    //console.log(v);\r\n\r\n  }\r\n  constructor() {\r\n    this.close = this.ESC + this.reset + this.m;\r\n    this.fillColors(this.fg);\r\n    this.fillColors(this.bg);\r\n    this.fillAttrs(this.atr);\r\n  }\r\n\r\n\r\n  // minus 60 no bright color for fg and bg\r\n  fg: TColors = {\r\n    Red: 91,\r\n    Green: 92,\r\n    Yellow: 93,\r\n    Blue: 94,\r\n    Magenta: 95,\r\n    Cyan: 96,\r\n    White: 97,\r\n  };\r\n  bg: TColors = {\r\n    Red: 101,\r\n    Green: 102,\r\n    Yellow: 103,\r\n    Blue: 104,\r\n    Magenta: 105,\r\n    Cyan: 106,\r\n    White: 107\r\n  };\r\n  atr: TColors = {\r\n    bold: 1,\r\n    underline: 4,\r\n    blinked: 5,\r\n    inverse: 7,\r\n    hidden: 8\r\n  }\r\n\r\n  ESC: string = '\\u001b[';\r\n  m: string = 'm';\r\n  reset: number = 0;\r\n\r\n  ifBright(b: boolean, color: number): number {\r\n    if (b) color -= 60;\r\n    return color;\r\n  }\r\n  log(...args: any[]) {\r\n    console.log(...args);\r\n  };\r\n  log_raw(...args: any[]) {\r\n    console.log(args);\r\n  };\r\n  msg(fn: string, arr: string[], colors: string | undefined): string {\r\n    let bgNotBright: boolean;\r\n    let fgNotBright: boolean;\r\n    let sbg: string | number;\r\n    let fg: string;\r\n    let bg: string | undefined;\r\n    let s: string = \"\";\r\n    let token_arr: string[];\r\n    let colors_arr: string[];\r\n    let attrs_arr: string[];\r\n    let pair_arr: string[];\r\n    let pairBright_arr: string[];\r\n    if (colors) {\r\n      colors_arr = colors.split(\" \");\r\n      //console.log(colors_arr)\r\n    }\r\n\r\n    if (fn) s = this.ESC + this.fg.R + this.m + fn;\r\n    if (arr)\r\n      arr.forEach((item, index, arr) => {\r\n        let k: string = colors_arr[index];\r\n        if (k) {\r\n          token_arr = k.split('/');\r\n          if (token_arr.length > 1) attrs_arr = token_arr[1].split(\";\");\r\n          else attrs_arr = [];\r\n          pair_arr = token_arr[0].split(\"_\");\r\n          fg = pair_arr[pair_arr.length - 1].toUpperCase();\r\n          (pair_arr.length > 1) ? bg = pair_arr[0]: bg = undefined;\r\n          //console.log(pair_arr);\r\n          if (bg) {\r\n            bg = bg.toUpperCase();\r\n            pairBright_arr = bg.split(\"-\");\r\n            bg = pairBright_arr[pairBright_arr.length - 1]\r\n            bgNotBright = (pairBright_arr.length > 1);\r\n\r\n            //console.log('pairBright_arr=', bg, bgNotBright);\r\n          }\r\n          pairBright_arr = fg.split(\"-\");\r\n          fg = pairBright_arr[pairBright_arr.length - 1]\r\n          fgNotBright = (pairBright_arr.length > 1);\r\n\r\n          //console.log('pairBright_arr=', fg, fgNotBright);\r\n          (!bg) ? sbg = \"\": sbg = \";\" + this.ifBright(bgNotBright, this.bg[bg]);\r\n          s += this.ESC + this.ifBright(fgNotBright, this.fg[fg]) + sbg;\r\n          attrs_arr.forEach((atr, index, arr) => {\r\n            //console.log(`'${atr}'`,this.atr[atr])\r\n            s += this.comma + this.atr[atr];\r\n\r\n          })\r\n          s += this.m;\r\n          s += item;\r\n          s += this.close;\r\n\r\n        }\r\n      });\r\n\r\n    return s;\r\n  }\r\n\r\n  removeVowels(input: string) {\r\n    let a0 = input[0]\r\n    let ai = input.substr(1, input.length - 1);\r\n    ai = ai.replace(/[aeiou]/gi, \"\");\r\n    ai = a0 + ai;\r\n    return ai;\r\n  }\r\n\r\n  getFunctionName(e: Error, ...args: any[]): TItems {\r\n    //console.log('args',args);\r\n    let path: string;\r\n    let path_arr: string[];\r\n    let file_arr: string[];\r\n    let items: TItems;\r\n    let item: string;\r\n    this.stack = e.stack as string;\r\n\r\n    let regexp = /at (.*?)\\(/g\r\n    let result;\r\n    let fn_arr: string[] = [];\r\n\r\n    while ((result = regexp.exec(this.stack)) !== null) {\r\n      //console.log('===', result[1])\r\n      fn_arr.push(result[1]);\r\n    }\r\n\r\n    file_arr = (this.stack.split('at ')[3].split('js'));\r\n    fn_arr = fn_arr.reverse();\r\n    //console.log('reverse', fn_arr)\r\n    fn_arr.pop()\r\n    file_arr = (this.stack.split('at ')[3].split('.js'));\r\n    file_arr.pop();\r\n    file_arr.push('js');\r\n    path = file_arr.join('.');\r\n    path_arr = path.split('/');\r\n    this.fileName = path_arr[path_arr.length - 1];\r\n    items = {\r\n      fn: fn_arr.pop() as string,\r\n      caller: fn_arr.pop() as string,\r\n      path: path,\r\n      file: this.fileName,\r\n    }\r\n    for (let key in items) {\r\n      item = items[key];\r\n      if (item) items[key] = items[key].trim();\r\n\r\n    }\r\n    return items;\r\n  }\r\n\r\n  dsp(): string {\r\n    let sp: string;\r\n    if (this.bHtml) sp = '&nbsp';\r\n    else sp = ' ';\r\n    sp = sp.repeat(2 * this.nsp);\r\n    //console.log('nsp=', nsp, 'sp.length=', sp);\r\n    return sp;\r\n  }\r\n\r\n  nu(a: number, getError: TItems, p: any) {\r\n    const isEmpty = (val: any) => val == null || !(Object.keys(val) || val).length;\r\n    let level: number;\r\n    let fn: string = \"\";\r\n    let sfn: string = \"\";\r\n    let arr_fn: string[];\r\n    if (getError) {\r\n\r\n      arr_fn = (getError.fn.trim().split('.'));\r\n      fn = arr_fn[arr_fn.length - 1];\r\n      if (this.bCaller) sfn = (getError.caller).trim() + \"::\";\r\n      else sfn = \"\";\r\n      sfn += arr_fn.join('.');\r\n    }\r\n    let s: string = \"(\";\r\n    let ak: string = \"\";\r\n    let a6: string = \"->\";\r\n    let a4: string = \"<-\";\r\n    let dx: string;\r\n    let sError: string;\r\n    let s_fileName: string;\r\n    if (this.fileName) {\r\n      //console.log('this.fileName=', this.fileName)\r\n      let name: string[] = this.fileName.split('_');\r\n      if (name.length > 1) this.fileName = this.removeVowels(name[0]) + '_' + name[1];\r\n    }\r\n    if (a > 0) ak = a6;\r\n    else if (a < 0) ak = a4;\r\n    //console.log('ak=',ak,'this.fn=',this.fn);\r\n\r\n    if (this.bShowTimer) this.te = new Date();\r\n    //console.log('p=',p)\r\n    if (!p) {\r\n      p = [];\r\n      p[0] = \"\"\r\n    };\r\n    for (let i = 0; i < p.length; i++) {\r\n      s += p[i]\r\n      if (i < p.length - 1) s += ',';\r\n    }\r\n    s += ')'\r\n    if (a > 0) this.nsp++;\r\n\r\n    sError = this.dsp() + ak + sfn;\r\n    level = (this.nsp % this.maxColorsLevel) + 1;\r\n    //console.log('level=',`${level}`,this.colorLevel[level]);\r\n    if (this.bTrace && (!this.logs || (isEmpty(this.logs) || this.logs.ALL || this.logs[fn] && !this.logs.ALL))) this.log(this.msg(\"\", [sError, s], this.colorLevel[level]), );\r\n    if (!this.bLogsIgnore) {\r\n      if (this.logs) {\r\n        if (this.logs[this.fn]) {\r\n          if (this.logs[this.fn]) {\r\n\r\n            if (this.bTrace) console.log(this.colorPlugin + this.fileName + \" ::1:TTNI[\" + this.fn + \"]:: \" + sError + s + this.colorReset);\r\n          }\r\n        } else {\r\n          if (this.bTrace) console.log(this.colorPlugin + this.fileName + \"  TTNI:: \" + sError + s + this.colorReset);\r\n        }\r\n      }\r\n    } else {\r\n      if (!this.bLogsIgnore) {\r\n        if (!this.fileName) {\r\n          this.fileName = \"\";\r\n        }\r\n        if (this.bTrace) console.log(this.colorPlugin, this.fileName, \" ::3:TTNI:: this.bLogsIgnore[\" + this.bLogsIgnore + \"] \" + sError + s + this.colorReset);\r\n      } else {}\r\n    }\r\n    if (a < 0) {\r\n      this.nsp--;\r\n      if (this.nsp < 0) this.nsp = 0;\r\n\r\n    }\r\n  }\r\n  ni(args: any) {\r\n    if (this.bShowTimer) this.ts = new Date();\r\n    if (args) {\r\n      if (this)\r\n        if (args[0] == this.fn) {\r\n          //console.log(this.sh.R('test TTNI:: this.fn='), this.fn, 'this.bTrace=', this.bTrace)\r\n        }\r\n    }\r\n    this.getError = this.getFunctionName(new Error());\r\n\r\n    this.nu(1, this.getError, args);\r\n  };\r\n\r\n  ne(args: any) {\r\n\r\n    this.getError = this.getFunctionName(new Error())\r\n    this.nu(-1, this.getError, args);\r\n    if (this.bShowTimer) this.te = new Date();\r\n  };\r\n\r\n  shAt() {\r\n    //this.getError = this.getFunctionName(new Error())\r\n    console.log('items at:', this.getError);\r\n  }\r\n  shStack() {\r\n    //this.getError = this.getFunctionName(new Error())\r\n    console.log('stack=', this.stack);\r\n  }\r\n  shTimer() {\r\n    if (this.bShowTimer) {\r\n      console.log(\":\" + this.Timer() + \" ms\");\r\n    }\r\n  }\r\n  Timer(): number {\r\n    return (this.te.getTime() - this.ts.getTime());\r\n  }\r\n}"]}